!function(){function o(n){this.currentGunman=n||1,this.move=function(){$(".gunman").addClass("gunman_"+f.currentGunman+"_walk")},this.readyForShoot=function(){$(".gunman").on("transitionend webkitTransitionEnd oTransitionEnd",function(){function n(){console.log(e+" and "+t),t>e&&(e++,$(".timer").text(e),$(".message").removeClass("hide")),t>e&&(e++,$(".timer").text(e),$(".message").removeClass("hide"),e==t&&($(".message").addClass("hide"),$(".gunman").removeClass("gunman_"+f.currentGunman+"_standing"),clearInterval(intervalID),$(".gunman").off("click",f.readyForShoot()),$(".startGame").removeClass("hide"),$(".timer").text(e),$(".gunman").off())),$(".max_time").text(t)}$(".gunman").removeClass("gunman_"+f.currentGunman+"_walk"),$(".gunman").addClass("gunman_"+f.currentGunman+"_standing"),intervalID=setInterval(n,10),$(".gunman").on("click",function(){function r(){a>n&&(n++,$(".score").text(n)),n==a&&($(".button_next_level").removeClass("undisplay"),$(".gunman").removeClass("gunman_"+f.currentGunman+"_falling"),$(".score").text(a),$(".timer").text(e))}if(clearInterval(intervalID),t>e){$(".message").addClass("hide"),$(".gunman").removeClass("gunman_"+f.currentGunman+"_standing"),$(".gunman").addClass("gunman_"+f.currentGunman+"_falling");var n=a;a+=t-e,setInterval(r,10),$(".gunman").off()}})})}}function m(n,a){var e=n-.5+Math.random()*(a-n+1);for(e=Math.round(e);e==f.currentGunman;)e=n-.5+Math.random()*(a-n+1),e=Math.round(e);return e}function s(){$(".startGame, .credits").addClass("hide"),e=0,t=300,$(".timer").text(e),$(".max_time").text(t),f.currentGunman=m(1,5),f.move(),f.readyForShoot()}function u(){$(".button_next_level").addClass("hide"),n++,n>=5&&console.log("YOU WIN!!!!"),e=0,t-=50,$(".timer").text(e),$(".max_time").text(t),f.currentGunman=m(1,5),f.move(),f.readyForShoot()}var n=0,a=0,e=0,t=300,i=new o(1),l=new o(2),d=new o(3),c=new o(4),v=new o(5),g=[i,l,d,c,v],f=g[Math.floor(Math.random()*g.length)];$(".startGame").on("click",s),$(".button_next_level").on("click",u)}();
